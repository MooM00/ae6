{
    "__meta" : {
	"game_file" : "Martian Mystery",
	"game_file_compatability" : "Martian Mystery w.3.4.6",
	"find_attr" : [ "descr", "detail", "get_descr" ],
	"room" : "title"
    },
    "__common_replies" : {
	"verb" : { 
	    "look" : { 
		"set" : [ [ "stdout", [ "unknown ", { "input" : "part"} ] ] ]
	    }
	},
	"object" : { 
	    "" : {
		"set" : [ [ "stdout", [ "what to do with ", { "input" : "object1_name"}, " ?"  ] ] ]
	    }
	},
	"both" : { }
    },
    "__common_actions" : {
	"look" : { "set" : [ [ "stdout" , "array", [ { "node" : [ "__self", "descr" ] } ] ] ] },
	"details" : { "set" : [ [ "stdout" , "array", [ { "node" : [ "__self", "detail" ] } ] ] ] },
	"get" : { 
	    "if" : [
		[
		    [ { "node" : [ "__self", "get_descr" ] }, "defined"  ],
		    { "set" : [ "stdout", "array", [ {"node" : [ "__self", "get_descr" ] } ] ] },
		    { "set" : [ "stdout", "array", [ "Got ", "." , { "node" : ["__self","name" ]} ] ] }
		],
		[
		    [ { "node" : [ "__self", "get_set" ] }, "defined"  ],
		    { "set" : [ { "node" : [ "__self", "get_set" ] }, "1" ] }
		]
	    ],
	    "set" : [ { "node" : [ "__self", "location" ]} , "__inventory" ]
	},
	"drop" : {
	    "set" : [ 
		[ { "node" : [ "__self", "location" ]} , { "sys" : "room" } ],
		[ "stdout" , "sum", [ "Dropped ", "." , { "node" : ["__self","name" ]}  ] ]
	    ]
	},
	"go" : { "set" : [ [ { "sys" : "room" } , "value", { "input" : [ "object1", "target" ] } ] ] }
    },
    "__command_quit" : { 
	"name" : "__command_quit",
	"type" : "room",
	"location" : "",
	"set" : [ [ { "sys" : "force_new_room" } , "value", "1" ], [ { "sys" : "show_exits"}, "value", "0" ], [ { "sys" : "no_input_alert"}, "value", "1" ] ],
	"if" : [ 
	    [
		[ { "input" : "sentance"} , "=~" , "^!q" ],
		{ 
		    "descr" : [ "Are you sure you want to quit?" ],
		    "set" : [ { "sys" : "prompt" }, "value" , "Y/N =>" ]
		}
	    ],
	    [
		[ { "input" : "sentance"} , "eq" , "y" ],
		{ 
		    "descr" : [ "Bye!" ] , 
		    "set" : [ 
			[ "stdin" , "value" , "!quit_now"  ]
		    ]
		}
	    ],
	    [
		[ { "input" : "sentance"} , "eq" , "n" ],
		{ 	
		    "descr" : [ "Quit cancelled." ],
		    "set" : [ "stdin", "value", "!no_quit" ]
		}
	    ]
	],

	"can" : { "go" : 1, "look" : "1" }
    },
    "lamp" : {
    	"name" : "lamp",
	"alias" : [ "light" ],
	"type" : "item",
	"location" : "bedroom",
	"descr" : [ "A simple lamp with an on/off switch" ],
	"can" : {
	    "on" : { 
		"alias" : ["turn on"],
		"if" : [
		    [ { "global" : "light" }, "==", "1" ],
		    {
			"set" : [ "stdout", "The light is alreasy on." ]
		    },
		    {
			"set" : [ 
				[ { "global" : "light" } , "1" ],
				[ "stdout", "array", [ "You reach over in bed and turn on the switch.","The light flickers on" ] ],
				[ { "sys" : "force_new_room" } , "1" ],
				[ { "sys" : "show_content" } , "1" ],
				[ { "node" : [ "nightstand", "location" ] } , "bedroom" ],
				[ { "node" : [ "dresser", "location" ] } , "bedroom" ],
				[ { "node" : [ "table", "location" ] } , "bedroom" ],
				[ { "node" : [ "uniform", "location" ] } , "bedroom" ],
				[ { "node" : [ "keycard", "location" ] } , "bedroom" ],
				[ { "node" : [ "lighter", "location" ] } , "bedroom" ]
		    ] }
		]
	    },
	    "off" : { 
		"alias" : ["turn off"],
		"if" : [
		    [ { "global" : "light" }, "==", "1" ],
		    {
			"set" : [ "stdout", ["","I'm not afraid of the dark but I really feel like\nI should get going.",""] ]
		    },
		    {
			"set" : [ "stdout", "The light is alreasy off." ]
		    }
		]
	    },
	    "look" : "1"
	}
    },
    "nightstand" : {
    	"name" : "nightstand",
	"alias" : [ "night stand", "dresser" ],
	"type" : "item",
	"location" : "bedroom",
	"if" : [
	    [ { "global" : "light" }, "==", "1" ],
	    {
		"descr" : [ "","There's nothing on here but a lamp. What a bummer.","" ]
	    },
	    {
		"descr" : [ "It's too dark to see anything but the lamp." ]
	    }
	],
	"can" : { "look" : "1" }
    },
    "dresser" : {
    	"name" : "dresser",
	"type" : "item",
	"location" : "hidden",
	"descr" : [ "There doesn't seem to be anything of use in here.","" ],
	"can" : { 
	    "look" : "1",
	    "check" : { "set" : [ [ "stdout" , "array", [ { "node" : [ "__self", "descr" ] } ] ] ] },
	    "open" : { "set" : [ [ "stdout" , "array", [ { "node" : [ "__self", "descr" ] } ] ] ] }
	}
    },
    "table" : {
	"name" : "table",
	"type" : "item",
	"location" : "hidden",
	"descr" : [ "A Table. Bare.","" ],
	"can" : { "look" : "1" }
    },
    "uniform" : {
    	"name" : "uniform",
	"alias" : [ "cloths" ] ,
	"type" : "item",
	"location" : "hidden",
	"descr" : [ "","One slightly uncomfortable uniform." ],
	"can" : { 
	    "look" : "1", 
	    "get" : {
		"if" : [
		    [ { "global" : "standing" } , "==" , "0" ],
		    {
			"set" : [ "stdout", ["You can't reach it from the bed..",""] ]
		    },
		    {
			"if" : [
			    [ { "global" : "uniform" } , "==" , "0" ],
			    {
				"set" : [ 
				    [ { "node" : [ "__self", "location" ]} , "__inventory" ],
				    [ { "global" : "uniform" } , "1" ],
				    [ "stdout", ["You put on your uniform, a dark jumpsuit with a white lab coat.",""] ]
				]
			    },
			    {
				"set" : [ "stdout", ["You're already wearing your uniform.",""] ]
			    }
			]
		    }
		]
	    }
	}
    },
    "keycard" : {
    	"name" : "keycard",
	"alias" : [ "card" ] ,
	"type" : "item",
	"location" : "hidden",
	"descr" : [ "","Your access keycard." ],
	"can" : { 
	    "look" : "1" , 
	    "get" : {
		"if" : [
		    [ { "global" : "standing" } , "==" , "0" ],
		    {
			"set" : [ "stdout", ["You can't reach it from the bed..",""] ]
		    },
		    {
			"if" : [
			    [ { "global" : "keyCard" } , "==" , "0" ],
			    {
				"set" : [ 
				    [ { "node" : [ "__self", "location" ]} , "__inventory" ],
				    [ { "global" : "keyCard" } , "1" ],
				    [ "stdout", ["You pick up the keycard.","This will probably come in handy.",""] ]
				]
			    },
			    {
				"set" : [ "stdout", ["You already have it.",""] ]
			    }
			]
		    }
		]
	    }
	}
    },
    "lighter" : {
    	"name" : "lighter",
	"type" : "item",
	"location" : "hidden",
	"descr" : [ "","One old lighter." ],
	"can" : { 
	    "look" : "1" , 
	    "get" : {
		"if" : [
		    [ { "global" : "standing" } , "==" , "0" ],
		    {
			"set" : [ "stdout", ["You can't reach it from the bed..",""] ]
		    },
		    {
			"if" : [
			    [ { "global" : "lighter" } , "==" , "0" ],
			    {
				"set" : [ 
				    [ { "node" : [ "__self", "location" ]} , "__inventory" ],
				    [ { "global" : "lighter" } , "1" ],
				    [ "stdout", ["You pick up the old lighter.",""] ]
				]
			    },
			    {
				"set" : [ "stdout", ["You already grabbed that.",""] ]
			    }
			]
		    }
		]
	    }
	}
    },
    "computer" : {
	"name" : "computer",
	"type" : "item",
	"location" : "lab",
	"can" : { 
	    "use" : { 
		"alias" : [ "go to", "turn on" ], 
		"set" :  [ "stdout", [
			"","","You walk over to the computer terminal.",
			"The computer's screensaver is active.","The keyboard and mouse appear to be intact.",
			"You hit the space bar a few times","and the system wakes up displaying a prompt.","",
			"Please swipe your keycard now...","\u0000 5"
		    ] ],
		"if" : [
		    [ { "global" : "keyCard" }, "==", "1" ],
		    {
			"set" : [ 
			    [ "stdout", [
				"","You switpe your id card.",
				"\u0000 3"
			    ] ],
			    [ { "sys" : "room" } , "computerCommand" ]
			]  
		    },
		    {
			"set" : [ 
			    [ "stdout", [
				"","","You don't have the keycard required.","Seems like I might have left it in my bedroom"
			    ] ]
			]
		    }
		]
	    }
	}
    },
    "closetkey" : {
    	"name" : "closetkey",
	"type" : "item",
	"location" : "lab",
	"get_descr" : [ "","","You walk over to the table","and pick up the key. The label keychain attached","to it says 'utility closet'","" ],
	"can" : { "get" : {
			"if" : [
			    [ { "global" : "closetKey" } , "==" , "0" ],
			    {
				"set" : [ 
				    [ { "node" : [ "__self", "location" ]} , "__inventory" ],
				    [ { "global" : "closetKey" } , "1" ],
				    [ "stdout", "array", [ {"node" : [ "__self", "get_descr" ] } ] ]
				]
			    },
			    {
				"set" : [ "stdout", ["You already have it.",""] ]
			    }
			]
	} }
    },
    "title" : {
    	"name" : "Title",
	"type" : "room",
	"location" : "",
	"descr" : [
		    "    ###########################################################",
		    "                         MARTIAN MYSTERY",
		    "                          VERSION w.3.4.6",
		    "                      CREATOR: TYLER BURROWS",
		    "    ###########################################################",
		    "                      Adapted for ae6 / WebPerl",
		    "    ###########################################################"

	],
	"exit" : { "__auto" : "intro" },
	"set" : [
		    [ { "global" : "uniform" }, "0" ],
		    [ { "global" : "keyCard" }, "0" ],
		    [ { "global" : "lighter" }, "0" ],
		    [ { "global" : "closetKey" }, "0" ],
		    [ { "global" : "standing" }, "0" ],
		    [ { "global" : "light" }, "0" ],
		    [ { "global" : "controlRoomPressureStabilization" }, "0" ],
		    [ { "global" : "controlRoomDoorLock" }, "1" ],
		    [ { "global" : "escapePodsLock" }, "1" ],
		    [ { "global" : "sectorBSeal" }, "0" ],
		    [ { "global" : "sectorCSeal" }, "0" ],
		    [ { "global" : "doctorWillisSaved" }, "0" ],
		    [ { "sys" : "refresh_cache_on_enter_room" }, "1" ],
		    [ { "sys" : "show_content" }, "0" ]
	],
	"can" : { "look" : 1 }
    },
    "intro" : {
    	"name" : "Intro",
	"type" : "room",
	"location" : "",
	"descr" : [     
	    "\u0000 cls",
	    "The year is 2021.",
	    "\u0000 3",
	    "You are a field scientist living in humanity's",
	    "first permanent habitat on the planet mars.",
	    "\u0000 4",
	    "It is the pinnacle of technology, costing US taxpayers over",
	    "14.7 billion dollars and taking 7 years to complete.",
	    "\u0000 4",
	    "It contains millions of dollars worth of equipment and supplies",
	    "and houses over 350 full time residents, mainly comprised of research scientists like yourself.",
	    "\u0000 4",
	    "",
	    "",
	    "\t\t\tWelcome to Cydonia.",
	    "\u0000 3",
	    "\u0000 cls",
	    "",
	    "You awaken with a start as you feel the entire room shake.",
	    "\u0000 3",
	    "",
	    "\t\t\tERRRN",
	    "\u0000 3",
	    "",
	    "\t\t\tERRRN",
	    "\u0000 3",
	    "",
	    "\t\t\tERRRN",
	    "\u0000 3",
	    "",
	    "The habitat's alarms begin to sound,",
	    "blaring loudly in your ear from above your bed.",
	    "The red light flashes bright in your face,",
	    "burning your eyes as you open them.",
	    "\u0000 3"
	],
	"exit" : { "__auto" : "bedroom" },
	"can" : { "look" : "1" },
	"set" : [ { "sys" : "refresh_cache_on_enter_room" }, "1" ]
    },
    "bedroom" : {
    	"name" : "Bedroom",
	"type" : "room",
	"location" : "",
	"if" : [ 
	    [
		[ { "global" : "prev_room" }, "eq", "hallway" ],
		{
		    "descr" : [ "","","You open the door to your bedroom and","proceed back inside." ]
		}
	    ],
	    [
		[ { "global" : "light"}, "==", 0 ],
		{
		    "descr" : ["It is very dark other than the flashing red alarm light on the ceiling.","There is a lamp on your nightstand."],
		    "can" : { 
			"stand" : { 
			    "alias" : ["get up", "get out of bed"] , 
			    "set" : [ "stdout" , "array", [ "","I can't really see anything.","I should turn on the light before I get up.","" ] ]
			}
		    }
		},
		{
		    "descr" : ["The sleeping quarters are quite small.","Only a bed, a nightstand, a desk, a large pressure-seal door, and a dresser are in the room"],
		    "if" : [ 
			[ 
			    [ { "global" : "uniform" }, "==", "0"], 
			    { 
				"descr" : [ " The chair in front of the desk has your uniform slung over it." ],
				"if" : [ 
				    [ { "global" : "standing" }, "==", "1"], 
				    {
					"can" : {
					    "door" : { 
						"alias" : [ "exit", "leave", "open door" ],
						"set" : [ 
						    "stdout", [ 
							"You can't help but feeling you're forgetting something...",
							"Whatever it is, you feel naked without it....",""
						    ] 
						] 
					    }
					}
				    }
				]
			    },
			    { "exit" : { "door" : { "alias" : [ "open door", "leave" ], "target" : "hallway" } } }
			],
		        [ 
			    [ { "global" : "keycard" }, "==", "0"], 
			    { 
				"descr" : [ " Your keycard sits on the desk." ], 
				"if" : [ [ { "global" : "lighter" }, "==", "0"], { "descr" : [ "  next to an old lighter." ]} ]
			    },
			    {
				"if" : [ [ { "global" : "lighter" }, "==", "0"], { "descr" : [ "  An old lighter sits on the desk." ]} ]
			    }
			],
			[
			    [ "1", "==", "1" ],
			    { "descr" : [ "There are no paintings or posters on the wall, just steel painted white.","" ] }
			],
			[ 
			    [ { "global" : "standing" }, "==" , "1" ],
			    {
				"can" : { 
				    "stand" : { 
					"alias" : ["get up", "get out of bed"] , 
					"set" : [ "stdout" , "array", [ "You are already standing.","" ] ]
				    }
				}
			    },
			    {
				"can" : { 
				    "stand" : { 
					"alias" : ["get up", "get out of bed"] , 
					"set" : [ 
					    [ "stdout" , "array", [ "You roll out of bed and stand up facing the door.","" ] ],
					    [ { "global" : "standing" }, "1" ]
					]
				    },
				    "door" : { 
					"alias" : [ "open door", "exit", "leave" ],
					"set" : [ "stdout" , [ "You can't reach it from the bed..",""] ] 
				    }
				}
			    }
			]
		    ]
		}
	    ]
	],
	"can" : { "look" : "1", "go" : "1" },
	"set" : [ { "sys" : "refresh_cache_on_enter_room" }, "1" ]
    },
    "hallway" : {
    	"name" : "Hallway",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "",
	    "",
	    "You are in a hallway",
	    "There are two doors.",
	    "One leading to your bedroom",
	    "and the other leading to a utility closet.",
	    "A sign on the wall indicates",
	    "the research lab is located to the right",
	    "and the control room is located to the left."
	],
	"exit" : {
	    "bedroom" : "bedroom",
	    "lab" : { "alias" : [ "right" ], "target" : "lab" },
	    "control room" : { "alias" : [ "left" ], "target" : "controlroom" }
	},
	"if" : [
	    [
		[ { "global" : "closetKey" }, "==", "1" ],
		{
		    "exit" : { "closet" : { "alias" : [ "utility" ], "target" : "utility" } }
		},
		{
		    "exit" : { "closet" : { "alias" : [ "no_utility" ], "target" : "no_utility" } }
		}
	    ],
	    [
		[ { "global" : "controlRoomDoorLock" }, "==", "1" ],
		{
		    "exit" : {"control room" : { "alias" : [ "left" ], "target" : "no_controlroom" } }
		},
		{
		    "exit" : {"control room" : { "alias" : [ "left" ], "target" : "controlroom" } }
		}
	    ]
	],
	"can" : { "look" : "1", "go" : "1" }
    },
    "no_utility" : {
    	"name" : "no_utility",
	"type" : "room",
	"location" : "",
	"descr" : [ "","","You try to open the utility closet door but find it to be locked.","The key has to be around here somewhere.","" ],
	"exit" : { "__auto" : "hallway" },
	"can" : { "look" : "1" }
    },
    "no_controlroom" : {
    	"name" : "no_controlroom",
	"type" : "room",
	"location" : "",
	"descr" : [ "","You try to open the door, but it","appears to be sealed.","" ],
	"exit" : { "__auto" : "hallway" },
	"can" : { "look" : "1" }
    },
    "utility" : {
	"name" : "utility",
	"type" : "room",
	"location" : "",
	"if" : [
	    [ { "private" : "first_entry" }, "<", "2" ],
	    {
		"descr" : [ "","","You use the closet key to unlock the door","and proceed into the utility room.","" ],
		"set" : [ [ { "private" : "first_entry" }, "sum", [{ "private" : "first_entry" }, "+", "1"] ] ] 
	    },
	    {
		"descr" : [ 
		    "","","The shelves and supplies have been knocked all over the room.","However, you see a pair of legs sticking out from",
		    "under one of the shelves. It looks like Dr. Willis.",""
		]
	    }
	],
	"can" : { 
	    "look" : "1", "go" : "1",
	    "willis" : {
		"alias" : [ "help", "legs" ],
		"set" : [ 
		    [ "stdout" , "array" , [
			"","","You run over to the shelves and, using all your strength, lift the",
			"shelf off of Dr. Willis. You pull him to the center","of the room and assess his vital signs. His breathing",
			"and heart-rate are fine. He's just unconscious.","There's nothing I can really do now.",
			"I'll come back to him later.","There's nothing else of use in here.","So, I better move on for now.",
			"You step back into the hallway.","",
			"\u0000 3",
			"\u0000 cls"
			]
		    ],
		    [ { "global" : "doctorWillisSaved" }, "1" ],
		    [ { "sys" : "room" } , "hallway" ]
		]
	    }
	},
	"exit" : { "door" : { "alias" : [ "leave", "door", "hallway" ], "target" : "hallway" } }
    },
    "lab" : {
	"name" : "lab",
	"type" : "room",
	"location" : "",
	"descr" : [ 
	    "","","The whole labratory is in dissaray.","Shelves are knocked over. There appears to be a liquid leaking from",
	    "one of the pipes on the wall, accompanied by a hissing noise","and a steam-like gas rising from leak",
	    "Most of the computer terminals in this room are","destroyed, but there is one that appears",
	    "to be functioning. There is a table across","from the computers with research equipment on it.",
	    "It is mostly beakers and test tubes. However, ",
	    [ "\\c", "there is one notebook laying open" ]
	],
	"if" : [
	    [
		[ { "global" : "closetKey" }, "==", "0" ],
		{ "descr" : [ " and a key on the table" ] },
		{ "descr" : [ "" ] }
	    ],
	    [
		[ { "global" : "lighter" }, "==", "1" ],
		{
		    "can" : { 
			"lighter" : { 
			    "alias" : [ "use lighter", "light lighter" ], 
			    "set" : [ { "sys" : "room" } , "value", "endingC" ] 
			}
		    }
		}
	    ]
	],
	"exit" : { "door" : { "alias" : [ "leave", "hallway", "go back" ], "target" : "hallway" } },
	"can" : { 
	    "look" : "1", "go" : "1",
	    "notebook" : {
		"alias" : [ "look at notebook", "take notebook", "get notebook" ],
		"set" : [ "stdout", "array", [ 
		    "","","You walk over to the table and look","at the notebook. There are sloppily drawn",
		    "calculations all over the notebook.","They appear to be attempting to predict the trajectory",
		    "of several objects in relation to the current","position of mars and the location",
		    "of the Cydonia research station. The calculations all","point to an impact...","\u0000 5"
		] ]
	    }
	}
    },
    "computerCommand" : {
	"name" : "computerCommand",
	"type" : "room",
	"location" : "",
	"if" : [
	    [
		[ { "private" : "screen" }, "==", "0" ],
		{ 
		    "descr" : [
			"\t\tCYDONIA RESEARCH CONSOLE 14.B","\t\tPLEASE CHOOSE FROM THE FOLLOWING MENU","",
			"\t1:..........................................VIEW LAB NOTES","",
			"\t2:......................................VIEW SYSTEM STATUS","",
			"\t3:........................................SECURITY OPTIONS","",
			"\t4:.....................................OPEN COMMUNICATIONS","",
			"\t5:....................................................QUIT","" 
		    ],
		    "can" : {
			"1" : { "set" : [ { "sys" : "room" }, "labNotesCommand" ] },
			"2" : { "set" : [ 
			    [ { "private" : "screen" }, "2" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"3" : { "set" : [ { "sys" : "room" }, "securityOptions" ] },
			"4" : { "set" : [
			    [ { "private" : "screen" }, "4" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"5" : { "set" : [ { "sys" : "room" }, "lab"]  }
		    }
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "2" ],
		{ 
		    "descr" : [ 
			"..............",
			"\u0000 1",
			"....",
			"\u0000 1",
			[ "\\c" , "Querying system status. Please wait." ] ,
			"\u0000 2",
			"","","Oxygen converters: Stable/Running","Main Power: partial/Sector C offline",
			"Auxilary Power: Offline","Communications: Offline","Escape Pods: 1 and 3 active. 2, 5, and 4 offline.",
			"\u0000 6"
		    ]
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "4" ],
		{ 
		    "descr" : [ 
			"","","Opening communications",["\\c",".................."],
			"\u0000 2",
			"",["\\c","Connection established. Syncronizing Satellites."],
			"\u0000 1",
			"","..........................","",
			"\u0000 1",
			"Outgoing communications currently offline",["\\c","due to solar cycle position."],
			"\u0000 3",
			["\\c","Message Received from Earth communications"],
			"","............................",
			"\u0000 3",
			"","MESSAGE DATE: Today","URGENCY: 10",
			"Research Post Cydonia, our sensors indicate that",
			"there have been a series of catastrophic asteroid",
			"strikes in your sector. System sensors indicate",
			"air seal leaks in sectors B and C. In all",
			"possibility, you may all be dead. If any of you",
			"can, please respond. If communications are down",
			"immediatly proceed to escape pods for evacuation.",
			"More asteroid strikes are eminent in the next few",
			"hours. Godspeed.",
			"\u0000 7"
		    ]
		}
	    ]
	],
	"set" : [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
    },
    "labNotesCommand" : {
	"name" : "labNotesCommand",
	"type" : "room",
	"location" : "",
	"if" : [
	    [
		[ { "private" : "screen" }, "==", "0" ],
		{ 
		    "descr" : [
			"\u0000 cls",
			"\t\t CYDONIA RESEARCH LAB NOTES","\t\tCHOOSE ENTRY TO ACCESS:",
			"    1:......................................04/16/23","",
			"    2:......................................04/19/23","",
			"    3:......................................05/01/23","",
			"    4:......................................05/05/23","",
			"    5:.........................................Today","",
			"    6:.......................................Go Back"
		    ],
		    "can" : {
			"1" : { "set" : [ 
			    [ { "private" : "screen" }, "1" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"2" : { "set" : [ 
			    [ { "private" : "screen" }, "2" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"3" : { "set" : [ 
			    [ { "private" : "screen" }, "3" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"4" : { "set" : [ 
			    [ { "private" : "screen" }, "4" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"5" : { "set" : [ 
			    [ { "private" : "screen" }, "5" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
			    [ { "private" : "screen" }, "0" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"6" : { "set" : [ { "sys" : "room" }, "computerCommand"]  }
		    }
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "1" ],
		{ 
		    "descr" : [ 
			"","","\t\tEntry from 04/16/23:","User: Doctor Tennant","","",
			"Our first ever entry! My team and I landed earlier today at","",
			"09:17 EST. My coleagues are Dr. Smith: mechanical engineer,","",
			"Dr. Willis: thermodynamic engineer, Dr. Margo: doctor of","",
			"astrobiology and physics, and of course myself Dr. Tennant: MD","",
			"and doctor of biology. We entered the Martian atmosphere around","",
			"09:00 EST. At this point, around 09:08 EST, our landing probe","",
			"encountered a 5 or 6 mile high Martian dust cyclone, commonly","",
			"reffered to as a Dust Devil. Luckily, we were able to release","",
			"the parachute in time to avoid being pulled in and our","",
			"retrorockets allowed us to redirect around the cyclone. We","",
			"are currently establishing contact with the communications","",
			"satellites and expect to be able to radio a full report","",
			"to Earth soon.","",
			"\u0000 15"
		    ]
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "2" ],
		{ 
		    "descr" : [ 
			"","","\t\tEntry from 04/9/23:","User: Doctor Tennant","","",
			"We had a bit of a scare today. An X-5 solar flare interfered","",
			"with out communications satellites, causing us to lose contact","",
			"with mission support for over six hours. Our initial concern","",
			"was that the satellite had been damaged and would need to be","",
			"repaired somehow. However, we were able initiate a restart",
			"of the satellites systems using a launchable data probe.","",
			"The LAKJSDKFJA;SLDL22332323XXXEWR5E2KLLL;AKLJDFKDKK","","",
			"DATA CORRUPT\nEND FILE",
			"\u0000 8"
		    ]
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "3" ],
		{ 
		    "descr" : [ 
			"","","\t\tEntry from 05/01/23:","User: Doctor Tennant","",
			"We've been on Mars for almost a month now. Our initial","",
			"set up and equipment tests are almost completed. Today, we","",
			"launched an expedition to the 'Face of Mars' in the Cydonia",
			"region. A region once thought to hold proof of former life","",
			"on Mars, this ancient formation strongly resembles a large face","",
			"when viewed from above and at the correct angle. We took rock","",
			"samples from several parts of the formation and created a 3-d","",
			"mapped rendering of it, using a sonar program. We found several","",
			"pockets of ice hidden several meters below the surface all around","",
			"the face.",
			"\u0000 10"
		    ]
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "4" ],
		{ 
		    "descr" : [ 
			"","","\t\tEntry from 04/16/23:","User: Doctor Tennant","",
			"My tests have finally completed on our rock and water samples","",
			"taken from the 'Face of Mars' region of Cydonia. In the rock","",
			"samples we found detectable amounts the building","",
			"blocks for life. However, it was the water that yielded the","",
			"truly interesting results. There appears to be, and keep in","",
			"mind we have not confirmed that no cross-contamination","",
			"occured with the sample, some form of microbial life present","",
			"in the frozen water deposits. It isn't like any organism","",
			"I've ever observed before. It seems to be a sulfur based","",
			"organism, that replicates incredibly quickly and is","",
			"resistant to almost any poisonous compound",
			"\u0000 13"
		    ]
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "5" ],
		{ 
		    "descr" : [ 
			"","","\t\tEntry from today:","User: Doctor Tennant","",
			"FILE NOT FOUND\nFILE MAY BE CORRUPT OR OPEN IN ANOTHER LOCATION","",
			"ERROR 19456.",
			"\u0000 4"
		    ]
		}
	    ]
	],
	"set" : [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
    },
    "securityOptions" : {
	"name" : "securityOptions",
	"type" : "room",
	"location" : "",
	"if" : [
	    [
		[ { "private" : "screen" }, "==", "1" ],
		{ 
		    "if" : [
			[ { "global" : "controlRoomDoorLock" } , "==", "1" ],
			{
			    "descr" : [ 
				"","","Control Room doors are currently: Locked","",[ "\\c","\tEnter 1 to lock or 2 to unlock:"]
			    ]
			},
			{
			    "descr" : [ 
				"","","Control Room doors are currently: Unlocked","",[ "\\c","\tEnter 1 to lock or 2 to unlock:"]
			    ]
			}
		    ],
		    "can" : {
			"1" : {
			    "set" : [ 
				[ "stdout", [ "","The door is now locked.","\u0000 2" ] ], 
				[ { "global" : "controlRoomDoorLock" } , "1" ],
				[ { "private" : "screen" }, "0" ],
				[ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
				[ "stop" ]
			    ] 
			},
			"2" : {
			    "if" : [
				[ { "global" : "controlRoomPressureStabilization"}, "==", "1" ],
				{
				    "set" : [ 
					[ "stdout", [ "","The door is now unlocked.","\u0000 2" ] ], 
					[ { "global" : "controlRoomDoorLock" } , "0" ],
					[ { "private" : "screen" }, "0" ],
					[ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
					[ "stop" ]
				    ] 
				},
				{
				    "set" : [ 
					[ "stdout", [ "","Cannot unlock the door at this time.",
					    "Sensors indicate a dangerous pressure leak.","\u0000 2" ] ], 
					[ { "private" : "screen" }, "0" ],
					[ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
					[ "stop" ]
				    ] 
				}
			    ]
			}
		    }
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "2" ],
		{ 
		    "if" : [
			[ { "global" : "escapePodsLock" } , "==", "1" ],
			{
			    "descr" : [ 
				"","","Escape Pod doors are currently: Locked","",[ "\\c","\tEnter 1 to lock or 2 to unlock:"]
			    ]
			},
			{
			    "descr" : [ 
				"","","Escape Pod doors are currently: Unlocked","",[ "\\c","\tEnter 1 to lock or 2 to unlock:"]
			    ]
			}
		    ],
		    "can" : {
			"1" : {
			    "set" : [ 
				[ "stdout", [ "","The door is now locked.","\u0000 2" ] ], 
				[ { "global" : "escapePodsLock" } , "1" ],
				[ { "private" : "screen" }, "0" ],
				[ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
				[ "stop" ]
			    ] 
			},
			"2" : {
			    "set" : [ 
				[ "stdout", [ "","The door is now unlocked.","\u0000 2" ] ], 
				[ { "global" : "escapePodsLock" } , "0" ],
				[ { "private" : "screen" }, "0" ],
				[ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ],
				[ "stop" ]
			    ] 
			}
		    }
		}
	    ],
	    [
		[ { "private" : "screen" }, "==", "0" ],
		{ 
		    "descr" : [
			"\u0000 cls",
			"\t\t CYDONIA RESEARCH SECURITY MENU","\t\tCHOOSE ENTRY TO ACCESS:","",
			"    1:..............................CONTROL ROOM DOORS","",
			"    2:........................ESCAPE POD LOCK OVERRIDE","",
			"    3:................................SECTOR C CONTROL","",
			"    4:................................SECTOR B CONTROL","",
			"    5:................................SECTOR A CONTROL","",
			"    6:.........................................GO BACK" 
		    ],
		    "can" : {
			"1" : { "set" : [
			    [ { "private" : "screen" }, "1" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ]
			] },
			"2" : { "set" : [ 
			    [ { "private" : "screen" }, "2" ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ]
			] },
			"3" : { "set" : [
			    [ "stdout", "array", [ "","","ERROR","Sector C is currently Offline. Unable to access controls.","Returning to menu."] ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"4" : { "set" : [
			    [ "stdout", [ "","","ERROR","Sector B is currently Offline. Unable to access controls.","Returning to menu."] ], 
			    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
			] },
			"5" : { "set" : [ { "sys" : "room" }, "sectorAcommand"]  },
			"6" : { "set" : [
			    [ "stdout", "array", [ "","","Going back to main menu....","\u0000 3","\u0000 cls" ] ],
			    [ { "sys" : "room" }, "computerCommand" ]
			] }
		    }
		}
	    ]
	],
	"set" : [
	    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ]
	]
    },
    "sectorAcommand" : {
	"name" : "sectorAcommand",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "\u0000 cls",
	    "\t\t CYDONIA RESEARCH SECTOR A CONTROL","\t\tCHOOSE ENTRY TO ACCESS:","",
	    "    1:...................................SEAL SECTOR B",
	    "    2:...................................SEAL SECTOR C",
	    "    3:.................................PRESSURE REPORT",
	    "    4:.........................................GO BACK"
	],
	"can" : { "look" : "1", 
	    "1" : {
		"set" : [
		    [ "stdout", "array", 
			[ 
			    "","","Sector B sealing",".","\u0000 1",
			    "...........","\u0000 1","...........","","\u0000 1",
			    "Sector B Sealed.","\u0000 2"
			] 
		    ],
		    [ { "global" : "sectorBSeal" }, "1" ],
		    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
		],
		"if" : [
		    [ { "global" : "sectorCSeal" }, "==", "1" ],
		    { "set" : [ { "global" : "controlRoomPressureStabilization" }, "1" ] }
		]
	    },
	    "2" : {
		"set" : [
		    [ "stdout", "array", 
			[ 
			    "","","Sector C sealing",".","\u0000 1",
			    "...........","\u0000 1","...........","","\u0000 1",
			    "Sector C Sealed.","\u0000 2"
			] 
		    ],
		    [ { "global" : "sectorCSeal" }, "1" ],
		    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] 
		],
		"if" : [
		    [ { "global" : "sectorBSeal" }, "==", "1" ],
		    { "set" : [ { "global" : "controlRoomPressureStabilization" }, "1" ] }
		]
	    },
	    "3" : {
		"if" : [
		    [
			[ { "global" : "sectorBSeal" }, "==", "0" ],
			{ "set" : ["stdout" , "array", [ "","","Sector B: Pressure Leak. CRITICAL." ] ] }
		    ],
		    [
			[ { "global" : "sectorCSeal" }, "==", "0" ],
			{ "set" : ["stdout" , "array", [ "","","Sector C: Pressure Leak. CRITICAL." ] ] }
		    ],
		    [
			{ "and" : [ [ { "global" : "sectorBSeal" }, "==", "1" ], [ { "global" : "sectorCSeal" }, "==", "1" ] ] },
			{ 
			    "set" : [
				[ "stdout" , "array", [ "","","Pressure stabilized.","Sectors B and C sealed.","\u0000 3" ] ],
				[ { "global" : "controlRoomPressureStabilization" }, "1" ]
			    ]
			}
		    ],
		    [
			[ { "global" : "sectorBSeal" }, "!=", "2" ],
			{  "set" : [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ] }
		    ]
		]
	    },
	    "4" : { "set" : [
		[ "stdout", "array", [ "Going back to the security menu....","\u0000 3","\u0000 cls" ] ],
		[ { "sys" : "room" }, "securityOptions" ]
	    ] }
	}
    },
    "controlroom" : {
	"name" : "controlroom",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "","","The control room consists of a central hub with","controls and computers and the circular",
	    "walls of the room are covered in monitors","terminals and gauges. Everything appears to be",
	    "functional. There are four escape pods along the far","wall. None of which are deployed. There is a computer terminal",
	    "with a visible alert message in the middle hub of the room. There is also a",
	    "circular window to the outside adjacent to the escape pods."
	],
	"can" : { "go" : "1", "look" : "1",
	    "window" : {
		"alias" : [ "look out window" ],
		"set" : [
		    [ "stdout", "array", [
			"","","You walk over to the window and peer out.","You weren't quite ready for what you see, however.",
			"You feel your heart drop as you look through","the window at the charred remains of sectors B and C of the station.",
			"A large impact crator seems to point to some kind of large asteroid.",
			"You can't imagine anyone surviving in that wreckage...", "\u0000 4"
		    ] ],
		    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ]
		]
	    },
	    "computer" : {
		"alias" : [ "use computer", "go to computer" ],
		"set" : [
		    [ "stdout", "array", [
			"","","You walk over to the computer to get a closer","look at the message. It is the system monitoring",
			"the vital signs of all the crew members.","Dr. Smith and Dr. Margo's vital signs are non-existent...",
			"However, mine seem fine and Dr. Willis' are weak but stable.", "\u0000 4"
		    ] ],
		    [ "stdout", "array", [ { "node" : [ "__self", "descr" ] } ] ]
		]
	    }
	},
	"exit" : { "door" : { "alias" : [ "open door", "leave", "hallway" ], "target" : "hallway" } },
	"if" : [
	    [ { "global" : "escapePodsLock" }, "==", "0" ],
	    { "exit" : { "pod" : { "alias" : [ "escape pod", "use escape pod", "escape", "get in escape pod" ], "target" : "areYouSure" } } },
	    { "exit" : { "pod" : { "alias" : [ "escape pod", "use escape pod", "escape", "get in escape pod" ], "target" : "no_escape" } } }
	]
    },
    "no_escape" : {
	"name" : "no_escape",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "","","The locks on the escape pods are currently engaged.",
	    "If I remember correctly, I can disable those from the labratory.",
	    "\u0000 3"
	],
	"can" : { "look" : "1" },
	"exit" : { "__auto" : "controlRoom" }
    },
    "areYouSure" : {
	"name" : "areYouSure",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "","","Do you really want to abandon the Cydonia research station",
	    "and return to Earth? If I'm missing anything, I won't very well","be able to go back and get it...",""
	],
	"can" : { "go" : "1", "look" : "1" },
	"exit" : { "no" : "controlroom" },
	"if" : [
	    [ { "global" : "doctorWillisSaved" }, "==", "1" ],
	    { "exit" : { "yes" : "endingA" } },
	    { "exit" : { "yes" : "endingB" } }
	]
    },
    "endingA" : {
	"name" : "endingA",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "","","You prepare the escape pods for launch. One for yourself",
	    " and one for Doctor Willis. You quickly run back to the utility room",
	    "and carry him into the command room. You lay him down",
	    "in one of the escape pods, activate its distress beacon, set its coordinates",
	    "for Earth, close the doors, and send him home. You then prepare your own pod as you watch",
	    "Doctor Willis' pod shoot into the air out the observation window.",
	    "You secure the door, lock in your coordinates, and initiate the launch protocol.",
	    "You feel yourself pulled down hard as the escape pod's thrusters",
	    "shoot you into the Martian atmosphere. As you depart,",
	    "you look back, seeing the wreckage of B and C sections scattered across the landscape.",
	    "The grief of the loss of your other team mates grips the pit",
	    "of your stomach tightly. You watch a 'Dust Devil' swings past the pod,",
	    "whirling dust around the windows as Cydonia wane in the distance.",
	    "You say a silent goodbye to your fallen comrads, taking comfort","in the fact you were at least able to save someone.",
	    "You close your eyes and lean your head back. 'What a trip' You think to yourself.",
	    "\u0000 18","","","Mission Successful.","\u0000 3"
	],
	"can" : { "look" : "1" },
	"exit" : { "__auto" : "play_again" }
    },
    "endingB" : {
	"name" : "endingB",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "","","You prepare your escape pod for launch. You get inside, secure the doors, set your",
	    "coordinates for Earth, and intiate the launch protocol. You feel the thrusters kick in as you are pulled back into your seat in the pod.",
	    "You are lifted high into the Martian atmosphere. As you ascend, you",
	    "look back at the shattered remains of sectors B and C of the research station.",
	    "You feel a sickening sadness as the deaths of your comrads sinks in.",
	    "'If only there was something I could have done. If I could have just saved one of them...'",
	    "You sigh and lean back into your seat, closing your eyes. 'It's going to be a long ride home' you think to yourself.",
	    "\u0000 18","","","Mission Successful...Sort of...You might have missed something...hint hint.","\u0000 3"
	],
	"can" : { "look" : "1" },
	"exit" : { "__auto" : "play_again" }
    },
    "endingC" : {
	"name" : "endingC",
	"type" : "room",
	"location" : "",
	"descr" : [
	    "","","You flick open the lighter and, after a few failed tries,","it lights. However, since the labratory is currently",
	    "leaking liquid oxygen and massive amounts of it are","being converted to gas from the heat of the room.",
	    "The flame causes a massive explosion. Time seems to slow down","as you see the flame grow and you feel consumed with heat.",
	    "Your body is torn asunder into millions of little pieces","as the explosive force ruptures the entire habitat.",
	    "This causes a pressure leak resulting in every little piece of you",",along with all the lab equipment,being blown",
	    "into space. The report of the habitat's destruction","and all its crew members' deaths won't even reach Earth",
	    "for another 14 minutes. Only one thought passes through your mind","in your final seconds. 'Why the hell",
	    "would anyone bring a lighter to a pressurized oxygen habitat?'","","","\t\t\tGAME OVER",
	    "\u0000 18"
	],
	"can" : { "look" : "1" },
	"exit" : { "__auto" : "play_again" }
    },
    "play_again" : {
	"name" : "play_again",
	"type" : "room",
	"location" : "",
	"set" : [ { "sys" : "show_exits" } , "0" ],
	"descr" : [ "\u0000 cls", "", "", "Would you like to play again? Y or N?" ],
	"can" : { "look" : "1", "go" : "1" },
	"exit" : { 
	    "Y" : { "alias" : [ "yes", "again", "play again", "restart", "redo" ], "target" : "restart" },
	    "N" : { "alias" : [ "no", "end", "exit", "quit", "bye" ], "target" : "end" }
	}
    },
    "end" : {
	"name" : "end",
	"type" : "room",
	"location" : "",
	"descr" : [ "","","Thank you for playing!","Goodbye!" ],
	"can" : { "look" : "1" },
	"set" : [ "stdin" , "value" , "!quit_now"  ]
    },
    "restart" : {
	"name" : "restart",
	"type" : "room",
	"location" : "",
	"set" : [
	    [ { "sys" : "show_exits" } , "1" ],
	    [ { "node" : [ "dresser", "location" ]} , "hidden" ],
	    [ { "node" : [ "table", "location" ]} , "hidden" ],
	    [ { "node" : [ "uniform", "location" ]} , "hidden" ],
	    [ { "node" : [ "keycard", "location" ]} , "hidden" ],
	    [ { "node" : [ "lighter", "location" ]} , "hidden" ]
	],
	"exit" : { "__auto" : "title" }
    }
}
